<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>STAT MID PROJECT - VISUALIZATION REDESIGN PROJECT</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STAT MID PROJECT</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./page2.html"> 
<span class="menu-text">CODE</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#original-visualizations" id="toc-original-visualizations" class="nav-link active" data-scroll-target="#original-visualizations">ORIGINAL VISUALIZATIONS</a></li>
  <li><a href="#analysis-of-the-original-visualizations" id="toc-analysis-of-the-original-visualizations" class="nav-link" data-scroll-target="#analysis-of-the-original-visualizations">ANALYSIS OF THE ORIGINAL VISUALIZATIONS</a></li>
  <li><a href="#redesigned-visualizations" id="toc-redesigned-visualizations" class="nav-link" data-scroll-target="#redesigned-visualizations">REDESIGNED VISUALIZATIONS</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">CONCLUSION</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">VISUALIZATION REDESIGN PROJECT</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Harsha Reddy Vanga &amp; Rohith Venkata Krishna Javvadi </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>Welcome to our STAT 515 Redesign Project! This project aims to analyze and improve the design of data visualizations, applying best practices in graphic design and data presentation. The focus is on improving clarity, enhancing insight, and addressing any shortcomings of the original visualizations.</p>
<p>In this project, we have selected two original visualizations that depict data about political candidates, including their wealth distribution and criminal cases. Through multiple redesigns, I aim to provide a clearer and more informative perspective on the underlying data.</p>
<section id="original-visualizations" class="level1">
<h1>ORIGINAL VISUALIZATIONS</h1>
<p>The original visualizations present data about political candidates in terms of:</p>
<p><strong>Criminal Cases Among Candidates</strong>: The percentage of candidates from different political party categories who have declared criminal and serious criminal cases.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/original1.png" class="img-fluid figure-img"></p>
<figcaption>Available at https://groups.google.com/g/national-election-watch/c/IJIZk3eP03w</figcaption>
</figure>
</div>
<p><strong>Financial Background</strong>: The wealth distribution among the contesting candidates, categorized into different wealth brackets (e.g., less than Rs. 10 lakhs, Rs. 10 lakhs to Rs. 50 lakhs, and above Rs. 5 crores).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/original 2.png" class="img-fluid figure-img"></p>
<figcaption>Available at https://groups.google.com/g/national-election-watch/c/IJIZk3eP03w</figcaption>
</figure>
</div>
</section>
<section id="analysis-of-the-original-visualizations" class="level1">
<h1>ANALYSIS OF THE ORIGINAL VISUALIZATIONS</h1>
<p>-Criminal Cases Visualization:</p>
<p>*The bar charts show that State Parties have the highest proportion of candidates with declared criminal and serious criminal cases (56% and 36%, respectively). National Parties and Independent candidates have lower proportions, but the difference in representation is not immediately clear.</p>
<p>*Flaws: The side-by-side bar charts use similar colors, making it difficult to differentiate between candidates with criminal and serious criminal cases. The charts also lack annotations that could make the differences between categories more obvious.</p>
<p>-Financial Background Visualization:</p>
<p>*The pie chart displays the proportion of candidates in different wealth categories, with most candidates falling below Rs. 10 lakhs (40.8%). A smaller portion of candidates possess wealth above Rs. 5 crores.</p>
<p>*Flaws: The pie chart is not ideal for accurately comparing different categories, especially when the proportions are close. Pie charts are less effective at revealing fine differences in data, making it harder to understand the distribution at a glance.</p>
</section>
<section id="redesigned-visualizations" class="level1">
<h1>REDESIGNED VISUALIZATIONS</h1>
<p>To address the shortcomings of the original visualizations, I have created several redesigned versions that emphasize clarity and comparative insights.</p>
<p>-Redesign 1 For Criminal Cases Visualization:</p>
<p><img src="images/Redesign_2.png" class="img-fluid"> This is a stacked horizontal bar chart comparing the share of candidates with criminal cases (gray) and crorepati candidates (black) across different political party categories. It includes State Parties, Registered Unrecognized Parties, National Parties, and Independent candidates.</p>
<p>-Key Points:</p>
<p>*National Parties have 77% crorepati candidates, showing a strong presence of wealth. State Parties have 69% crorepati candidates and 31% with criminal cases.</p>
<p>*Independent candidates are nearly balanced, with 52% having criminal cases and 48% being crorepati. Registered Unrecognized Parties have 52% with criminal cases versus 48% who are crorepati.</p>
<p>-Improvements:</p>
<p>*Direct Comparison: Stacking the data allows for a side-by-side look at criminal cases vs.&nbsp;wealth within each party.</p>
<p>*Clear Labels: Percentages on each segment make it easy to see the share of each group.</p>
<p>*Simpler Analysis: By combining two metrics in one chart, it’s easier to grasp the overall picture quickly.</p>
<p>This design makes it simple to compare the balance of wealth and criminal backgrounds among candidates from various parties.</p>
<p>-Redesign 2 For Criminal Cases Visualization:</p>
<p><img src="images/Redesign1.png" class="img-fluid"></p>
<p>This chart uses a grouped bar chart to display the percentage of candidates with criminal cases (red) and crorepati candidates (blue) across different political parties, including State Parties, National Parties, Registered Unrecognized Parties, and Independents.</p>
<p>-Key Points:</p>
<p>*State Parties have the highest share of crorepati candidates (79%) and a significant portion with criminal cases (56%).</p>
<p>*National Parties follow with 30% crorepati candidates and 17% with criminal cases.</p>
<p>*Independents and Registered Unrecognized Parties have smaller shares, both showing 16% of candidates with criminal cases.</p>
<p>-Improvements:</p>
<p>*Side-by-Side Comparison: Grouped bars make it easy to compare criminal cases and wealth status within each party.</p>
<p>*Color Distinction: Clear color contrast helps differentiate the two data categories. Visual Balance: This layout provides a balanced view of the data, making it easier to assess both aspects at a glance.</p>
<p>*This design provides a quick comparison between the financial background and legal status of candidates in each party, offering a straightforward way to interpret the data.</p>
<p>-Redesign 1 For Financial Background Visualization:</p>
<p><img src="images/redesign2.png" class="img-fluid"></p>
<p>This horizontal bar chart illustrates the wealth distribution among contesting candidates, categorized into various wealth brackets, from less than Rs. 10 lakhs to above Rs. 5 crores.</p>
<p>-Key Points:</p>
<p>*The majority of candidates (40.8%, 965 candidates) have wealth above Rs. 5 crores, indicating a significant portion of wealthy candidates.</p>
<p>*24.7% of candidates fall within the Rs. 2 crores to Rs. 5 crores range.</p>
<p>*The Rs. 50 lakhs to Rs. 2 crores category comprises 15% of candidates.</p>
<p>*The least represented category is less than Rs. 10 lakhs, accounting for 5.8% or 138 candidates.</p>
<p>-Improvements:</p>
<p>*Enhanced Clarity: The horizontal bar layout allows for easier reading and comparison of each wealth category.</p>
<p>*Direct Annotations: Percentages and candidate counts are displayed directly on the bars, eliminating the need to refer back to the axis.</p>
<p>*Better Visual Hierarchy: Larger wealth categories are visually more prominent, making it easier to understand the overall distribution.</p>
<p>This redesign provides a clear and intuitive way to see the distribution of wealth among candidates, highlighting which groups are more prevalent.</p>
<p>-Redesign 1 For Financial Background Visualization:</p>
<p><img src="images/redesign3.png" class="img-fluid"></p>
<p>This visualization uses a stacked bar chart to show the percentage and number of candidates in different wealth categories. Each segment represents a wealth bracket, ranging from less than Rs. 10 lakhs to above Rs. 5 crores.</p>
<p>-Key Points:</p>
<p>*The largest portion of candidates (40.8%, 965 candidates) belongs to the above Rs. 5 crores category.</p>
<p>*24.7% of candidates fall within the Rs. 2 crores to Rs. 5 crores range, with 586 candidates.</p>
<p>*The Rs. 50 lakhs to Rs. 2 crores category includes 15% (356 candidates).</p>
<p>*The smallest group is those with less than Rs. 10 lakhs (5.8%, 138 candidates).</p>
<p>-Improvements:</p>
<p>*Visual Simplicity: The stacked bar chart format allows viewers to easily see the proportion of each wealth category.</p>
<p>*Color Coding: Each category is assigned a distinct color, improving readability and making it easy to differentiate wealth groups.</p>
<p>*Detailed Annotations: Each section is labeled with both the percentage and the exact number of candidates, providing precise information without needing additional references.</p>
<p>This redesign offers a clear, concise way to view the wealth distribution among candidates, making it easier to understand the overall spread of financial backgrounds.</p>
</section>
<section id="conclusion" class="level1">
<h1>CONCLUSION</h1>
<p>The redesigns highlight the power of choosing the right visual representation for data. Through the process, I learned that simplifying visuals and selecting chart types that align with the data structure can significantly enhance the viewer’s understanding. Each redesign has its strengths and offers a unique way to interpret the data, whether through a clear bar chart, a detailed treemap, or enhanced annotations.</p>
<p>Further improvements could involve interactive charts that allow users to explore the data by selecting party categories or wealth brackets. Such interactivity would provide a deeper dive into the data and offer a more engaging experience for viewers.</p>
<p>Feel free to explore the visualizations and analysis provided in each section of this website, and I hope you find the redesigns insightful!</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/gMM6LK2kbeM" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>